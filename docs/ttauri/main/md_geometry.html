<!-- HTML header for doxygen 1.9.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TTauri: TTauri Geometry System</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="version_dropdown.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TTauri
   </div>
   <div id="projectbrief">A low latency retained GUI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">TTauri Geometry System </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md69"></a>
Low level geometry types</h1>
<h2><a class="anchor" id="autotoc_md70"></a>
numeric_array&lt;T,N&gt;</h2>
<p>The <code>numeric_array</code> is an array of numbers, with many mathematical operations on the array of numbers. The numeric_array is designed to be useable in constexpr and easilly to vectorize by the optimizer.</p>
<h2><a class="anchor" id="autotoc_md71"></a>
f32x4</h2>
<p>The <code>f32x4</code> is an <code>numeric_array&lt;float,4&gt;</code> many of the operations on a <code>f32x4</code> are hand optimized using the intel intrinsics on SSE registers.</p>
<h1><a class="anchor" id="autotoc_md72"></a>
High level geometry type</h1>
<h2><a class="anchor" id="autotoc_md73"></a>
geo::vector&lt;D&gt;</h2>
<p>A vector is a direction and distance.</p>
<p>When transforming a vector, only scale, rotation and shear have effect.</p>
<p>Both <code>vector2</code> and <code>vector3</code> are implemented as a <code>f32x4</code> homogenious 4D coordinate with w = 0.0.</p>
<h2><a class="anchor" id="autotoc_md74"></a>
geo::point&lt;D&gt;</h2>
<p>A point is a location in space.</p>
<p>A point can be transformed in the same way as a vector and also be translated.</p>
<p>Both <code>point2</code> and <code>point3</code> are implemented as a <code>f32x4</code> homogenious 4D coordinate with w = 1.0.</p>
<h2><a class="anchor" id="autotoc_md75"></a>
geo::extent&lt;D&gt;</h2>
<p>An extend is a width, height and depth.</p>
<p>A extent can be transformed like a vector.</p>
<p>Both <code>extent2</code> and <code>extent3</code> are implemented as a <code>f32x4</code> homegeniuos 4D coordindate with w = 0.0.</p>
<h2><a class="anchor" id="autotoc_md76"></a>
corner_shapes</h2>
<p>Corner shapes are 4 floating point numbers one for the corner in the left-bottom, right-bottom, left-top and right-top corner. Each number has the following meaning:</p>
<ul>
<li>0.0 Sharp corner,</li>
<li>&gt;0.0 Radius of a rounded corner,</li>
<li>&lt;0.0 Radius of a cut corner.</li>
</ul>
<h2><a class="anchor" id="autotoc_md77"></a>
color</h2>
<p>A 4D red, green, blue and alpha values. A <code>color</code> can be transformed like a <code>vector3</code>, in this case the alpha value is ignored and copied into the result.</p>
<p>For more information see: <a class="el" href="md_color.html">color</a>.</p>
<h2><a class="anchor" id="autotoc_md78"></a>
rectangle</h2>
<p>A <code>rectangle</code> is a closed plane in three dimensions.</p>
<p>A <code>rectangle</code> can be transformed like a <code>point3</code>.</p>
<p>It should be implemented as a <code>point3</code> in the left-bottom corner and two <code>vector3</code>s to the upper and right corners. However it is currently implemented as 4 points one for each corner.</p>
<h2><a class="anchor" id="autotoc_md79"></a>
axis_aligned_rectangle</h2>
<p>The <code>axis_aligned_rectangle</code> class is a 2D axis-aligned rectangle.</p>
<p>When transforming an axis aligned rectangle in 3D or with rotation the result will be a normal <code>rectangle</code>. A rectangle can be converted back to an axis_aligned_rectangle, as a bounding rectangle around the transformed rectangle.</p>
<p>a axis_aligned_rectangle is implemented as a <code>f32x4</code> where:</p><ul>
<li>x - left-bottom point x.</li>
<li>y - left-bottom point y.</li>
<li>z - right-top point x.</li>
<li>w - right-top point y.</li>
</ul>
<h1><a class="anchor" id="autotoc_md80"></a>
Transformation types</h1>
<h2><a class="anchor" id="autotoc_md81"></a>
geo::identity</h2>
<p>An identity transform does not</p>
<h2><a class="anchor" id="autotoc_md82"></a>
geo::translate&lt;D&gt;</h2>
<h2><a class="anchor" id="autotoc_md83"></a>
geo::scale&lt;D&gt;</h2>
<h2><a class="anchor" id="autotoc_md84"></a>
geo::rotate&lt;D&gt;</h2>
<h2><a class="anchor" id="autotoc_md85"></a>
geo::matrix&lt;D&gt;</h2>
<p>The <code>mat</code> class is a 4x4 homogeneous transformation matrix in column-major order. Internally this a <code>vec</code> for each column.</p>
<p>Vector * matrix multiplications are performed as if the vector is a column.</p>
<h2><a class="anchor" id="autotoc_md86"></a>
geo::transform</h2>
<h1><a class="anchor" id="autotoc_md87"></a>
Coordinates</h1>
<p>All origins (0, 0, 0) are at the bottom-left-far corner. With the x-axis pointing right, y-axis pointing up, z-axis pointing near.</p>
<p>This is true for:</p><ul>
<li>Window</li>
<li>Images</li>
<li>Paths</li>
<li>Font-glyphs</li>
</ul>
<h2><a class="anchor" id="autotoc_md88"></a>
Window and Widget-surface coordinates</h2>
<p>The local coordinates in a window and widgets are in points. With the origin in the corner of the left bottom most point.</p>
<p>The local x,y-coordinates are multiplied by the DPI-scale of the window. The DPI-scale is always an integer, which allows much easier alignment of lines to actual pixels.</p>
<p>The alignment of borders to pixels is the responsibility of the widget that draws itself. The widget has access to the draw_context::drawBoxIncludingBorder() function to position the border's edge to the edge of the given rectangle, if the rectangle is rounded to integer coordinates; the rectangle, border and pixel will share the same edge.</p>
<p>At DPI-scale of 1, it is assumed that the display has a 84 DPI. This is the middle ground between Window's default 96 DPI and macOS's default 72 DPI. The ShapedText class will scale to 84 DPI automatically, further DPI scaling will be handled by the draw_context.</p>
<h2><a class="anchor" id="autotoc_md89"></a>
Window depth</h2>
<p>Z-coordinate for a window is between 0.0 (far) to 100.0 (near). For better precision we use a reverse-z method, to combine 1/z together with float with linear precision.</p>
<ul>
<li>The window-widget is set to depth 0.0.</li>
<li>Each nested widget, which needs to draw itself, is 1.0 nearer.</li>
<li>Widgets which extends across other widgets, such as a combo-box-widget will be 25.0 nearer.</li>
</ul>
<h2><a class="anchor" id="autotoc_md90"></a>
Image coordinates</h2>
<p>The coordinates in a image are in pixels. With the center of the left bottom pixel having the coordinates (0.5, 0.5).</p>
<h2><a class="anchor" id="autotoc_md91"></a>
Path coordinates</h2>
<p>The coordinates in a path are free from scale and origin, when rendering a path to an image, the path should be first be transformed to image coordinates.</p>
<h2><a class="anchor" id="autotoc_md92"></a>
Glyph/Font coordinates</h2>
<p>Glyph coordinates are in the number of Em units. X-axis pointing right, Y-axis pointing up. The origin (0,0) is on the crossing of the base line and left side bearing. Vertices of front faces are specified in counter clockwise order.</p>
<h1><a class="anchor" id="autotoc_md93"></a>
Corners</h1>
<p>Corners are enumerated as follows:</p><ul>
<li>0: near bottom left</li>
<li>1: near bottom right</li>
<li>2: near top left</li>
<li>3: near top right</li>
<li>4: far bottom left</li>
<li>5: far bottom right</li>
<li>6: far top left</li>
<li>7: far top right</li>
</ul>
<p>When corners are passing as 4D vectors:</p><ul>
<li>x = bottom-left</li>
<li>y = bottom-right</li>
<li>z = top-left</li>
<li>w = top-right</li>
</ul>
<h1><a class="anchor" id="autotoc_md94"></a>
Triangles</h1>
<p>A front facing triangle has the vertex ordered in counter-clockwise direction.</p>
<h1><a class="anchor" id="autotoc_md95"></a>
Quads</h1>
<p>Quads are defined as two front facing triangles. The vertex index order is: 0, 1, 2, 2, 1, 3</p>
<p>As illustrated below:</p>
<div class="fragment"><div class="line">2 &lt;--- 3</div>
<div class="line">| \    ^</div>
<div class="line">|  \ B |</div>
<div class="line">| A \  |</div>
<div class="line">v    \ |</div>
<div class="line">0 ---&gt; 1</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.0-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" width="104" height="31" alt="doxygen"/></a> 1.8.17
</small></address>
</body>
</html>
