<!-- HTML header for doxygen 1.9.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TTauri: TTauri Template Language</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="version_dropdown.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TTauri
   </div>
   <div id="projectbrief">A low latency retained GUI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">TTauri Template Language </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This template language was designed for code generation for different programming languages including HTML. The language was inspired by makotemplate.org, but with a simpler data model making it more easy to do more complicated stuff.</p>
<h1><a class="anchor" id="autotoc_md93"></a>
Data model</h1>
<p>All assignments at the top level of a file will be added to the global scope. All assignments inside an included file are also made to the global scope.</p>
<p>Inside functions all assignments are done in the local scope of the function.</p>
<p>Loops do not introduce a new scope, all assignments within a loop will therefor be in either the global or local scope depending where the loop is defined. Some special read-only names prefixed with one or more '$' characters are available inside the loop.</p>
<p>Functions and blocks exist in a special global scope which only contains functions. <code>function</code> or <code>block</code> definitions which appear later in a file will override a previous definition. By calling <code>super()</code> from within a <code>function</code> or <code>block</code> you can call its previous definition.</p>
<h1><a class="anchor" id="autotoc_md94"></a>
Expressions</h1>
<p>The <code><a class="el" href="namespacett.html#aec37e5f48519c8dbb9bda815a02dd9c6">tt::datum</a></code> class is used for holding and operating on all the data while executing an expression of the TTauri template language. A <code><a class="el" href="namespacett.html#aec37e5f48519c8dbb9bda815a02dd9c6">tt::datum</a></code> class can hold the following types:</p><ul>
<li>Undefined</li>
<li>None</li>
<li>Boolean</li>
<li>Integer</li>
<li>Decimal</li>
<li>Float</li>
<li>String</li>
<li>URL</li>
<li>Vector</li>
<li>Map</li>
</ul>
<h2><a class="anchor" id="autotoc_md95"></a>
Subexpression</h2>
<p>Expressions can be enclosed inside parenthesis '(' ')' to force precedence on the expression inside.</p>
<h2><a class="anchor" id="autotoc_md96"></a>
Operators</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight">Precedence </th><th class="markdownTableHeadLeft">Operator </th><th class="markdownTableHeadLeft">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">2 </td><td class="markdownTableBodyLeft">expr '[' expr ']' </td><td class="markdownTableBodyLeft">Subscripting  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">2 </td><td class="markdownTableBodyLeft">expr '(' args ')' </td><td class="markdownTableBodyLeft">Function call  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">3 </td><td class="markdownTableBodyLeft">'+' expr </td><td class="markdownTableBodyLeft">Unary plus  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">3 </td><td class="markdownTableBodyLeft">'-' expr </td><td class="markdownTableBodyLeft">Unary minus  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">3 </td><td class="markdownTableBodyLeft">'~' expr </td><td class="markdownTableBodyLeft">Bitwise not  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">3 </td><td class="markdownTableBodyLeft">'!' expr </td><td class="markdownTableBodyLeft">Boolean not  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">3 </td><td class="markdownTableBodyLeft">'++' expr </td><td class="markdownTableBodyLeft">Increment  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">3 </td><td class="markdownTableBodyLeft">'&ndash;' expr </td><td class="markdownTableBodyLeft">Decrement  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">4 </td><td class="markdownTableBodyLeft">expr '.' name </td><td class="markdownTableBodyLeft">Member  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">4 </td><td class="markdownTableBodyLeft">expr '**' expr </td><td class="markdownTableBodyLeft">Power  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">5 </td><td class="markdownTableBodyLeft">expr '*' expr </td><td class="markdownTableBodyLeft">Multiply  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">5 </td><td class="markdownTableBodyLeft">expr '/' expr </td><td class="markdownTableBodyLeft">Divide / path-join  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">5 </td><td class="markdownTableBodyLeft">expr '' expr </td><td class="markdownTableBodyLeft">Remainder  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">6 </td><td class="markdownTableBodyLeft">expr '+' expr </td><td class="markdownTableBodyLeft">Addition / append  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">6 </td><td class="markdownTableBodyLeft">expr '-' expr </td><td class="markdownTableBodyLeft">Subtraction  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">7 </td><td class="markdownTableBodyLeft">expr '&lt;&lt;' expr </td><td class="markdownTableBodyLeft">Bitwise shift left  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">7 </td><td class="markdownTableBodyLeft">expr '&gt;&gt;' expr </td><td class="markdownTableBodyLeft">Bitwise shift right with sign extend  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">9 </td><td class="markdownTableBodyLeft">expr '&lt;' expr </td><td class="markdownTableBodyLeft">Less than  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">9 </td><td class="markdownTableBodyLeft">expr '&gt;' expr </td><td class="markdownTableBodyLeft">Greater than  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">9 </td><td class="markdownTableBodyLeft">expr '&lt;=' expr </td><td class="markdownTableBodyLeft">Less than or equal to  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">9 </td><td class="markdownTableBodyLeft">expr '&gt;=' expr </td><td class="markdownTableBodyLeft">Greater than or equal to  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">10 </td><td class="markdownTableBodyLeft">expr '==' expr </td><td class="markdownTableBodyLeft">Equal to  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">10 </td><td class="markdownTableBodyLeft">expr '!=' expr </td><td class="markdownTableBodyLeft">Not equal to  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">11 </td><td class="markdownTableBodyLeft">expr '&amp;' expr </td><td class="markdownTableBodyLeft">Bitwise and  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">12 </td><td class="markdownTableBodyLeft">expr '^' expr </td><td class="markdownTableBodyLeft">Bitwise xor  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">13 </td><td class="markdownTableBodyLeft">expr '|' expr </td><td class="markdownTableBodyLeft">Bitwise or  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">13 </td><td class="markdownTableBodyLeft">expr '|' name </td><td class="markdownTableBodyLeft">String filter  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">14 </td><td class="markdownTableBodyLeft">expr '&amp;&amp;' expr </td><td class="markdownTableBodyLeft">Logical short-circuit and  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">15 </td><td class="markdownTableBodyLeft">expr '||' expr </td><td class="markdownTableBodyLeft">Logical short-circuit or  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">16 </td><td class="markdownTableBodyLeft">expr '?' expr ':' expr </td><td class="markdownTableBodyLeft">Ternary short-circuit operator  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">16 </td><td class="markdownTableBodyLeft">expr '=' expr </td><td class="markdownTableBodyLeft">Assign  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">16 </td><td class="markdownTableBodyLeft">expr '+=' expr </td><td class="markdownTableBodyLeft">Inplace add  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">16 </td><td class="markdownTableBodyLeft">expr '-=' expr </td><td class="markdownTableBodyLeft">Inplace subtractions  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">16 </td><td class="markdownTableBodyLeft">expr '*=' expr </td><td class="markdownTableBodyLeft">Inplace multiply  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">16 </td><td class="markdownTableBodyLeft">expr '/=' expr </td><td class="markdownTableBodyLeft">Inplace divide / path-join  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">16 </td><td class="markdownTableBodyLeft">expr '%=' expr </td><td class="markdownTableBodyLeft">Inplace remainder  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">16 </td><td class="markdownTableBodyLeft">expr '&lt;&lt;=' expr </td><td class="markdownTableBodyLeft">Inplace shift left  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">16 </td><td class="markdownTableBodyLeft">expr '&gt;&gt;=' expr </td><td class="markdownTableBodyLeft">Inplace shift right  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">16 </td><td class="markdownTableBodyLeft">expr '&amp;=' expr </td><td class="markdownTableBodyLeft">Inplace and  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">16 </td><td class="markdownTableBodyLeft">expr '^=' expr </td><td class="markdownTableBodyLeft">Inplace xor  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">16 </td><td class="markdownTableBodyLeft">expr '|=' expr </td><td class="markdownTableBodyLeft">Inplace or  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">17 </td><td class="markdownTableBodyLeft">expr '!' name </td><td class="markdownTableBodyLeft">String filter  </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md97"></a>
Function call</h2>
<p>Call a function with zero or more arguments.</p>
<p>A function is a name in special global scope with functions. Functions are build-in, passed by the developer when evaluating an expression, or added in the template by the user.</p>
<p>Syntax: &lsquo;name &rsquo;(' ( expression ( ',' expression )* ','? )? ')'`</p>
<h2><a class="anchor" id="autotoc_md98"></a>
String filter</h2>
<p>The string filter binary operator '!' implicitly converts the left hand side expression to a string, and passes this string through the filter <code>name</code>, yielding a new string.</p>
<p>Built in filters:</p><ul>
<li><code>html</code>: html-encode the string.</li>
<li><code>xml</code>: xml-encode the string.</li>
<li><code>url</code>: url-encode the string.</li>
<li><code>id</code>: Convert string to match <code>[a-zA-Z_][0-9a-zA-Z_]*</code>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md99"></a>
Assignment</h2>
<p>An assignment operator is different from inplace-operations. An inplace-operation will modify a value of an existing variable. An assignment operator will create or replace a variable at the current scope.</p>
<p>The current scope is either the local scope of the function where the expression is located. Or in the global scope if the expression is located at the top level (outside of a function) of a template. control flow will not intruduce new scopes.</p>
<p>An assignment done in the local-scope will hide variables in global scope with the same name.</p>
<p>Assignment can be done on multiple variables at the same time, by unpacking into a vector literal.</p>
<p>Syntax: &lsquo;name | expr &rsquo;=' expression`</p>
<p>Syntax: &lsquo;&rsquo;[' name | expr ( ',' name | expr )* ']' '=' expression`</p>
<h2><a class="anchor" id="autotoc_md100"></a>
Null</h2>
<p>Used by the user to denote a <em>nothing</em> value.</p>
<p>Syntax: <code>null</code></p>
<h2><a class="anchor" id="autotoc_md101"></a>
Undefined</h2>
<p>Used by the system to denote a <em>nothing</em> value. This will be used temporarily when indexing a vector or map on a non existing key which may then be replaced with a new value.</p>
<p>Syntax: <code>undefined</code></p>
<h2><a class="anchor" id="autotoc_md102"></a>
Boolean</h2>
<p>Syntax: <code>true</code> or <code>false</code></p>
<p>Explicit conversion: <code>boolean()</code></p>
<p>Operations available that work on a boolean (all datum will be implicitly converted to a boolean):</p><ul>
<li><code>not boolean -&gt; boolean</code></li>
<li><code>boolean and boolean -&gt; boolean</code></li>
<li><code>boolean or boolean -&gt; boolean</code></li>
<li><code>boolean == boolean -&gt; boolean</code></li>
<li><code>boolean != boolean -&gt; boolean</code></li>
<li><code>boolean &lt; boolean -&gt; boolean</code></li>
<li><code>boolean &gt; boolean -&gt; boolean</code></li>
<li><code>boolean &lt;= boolean -&gt; boolean</code></li>
<li><code>boolean &gt;= boolean -&gt; boolean</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md103"></a>
Integer</h2>
<p>A 64 bit signed integer in 2's compliment format.</p>
<p>Syntax: &lsquo;[+-]?(0[bBoOdDxX])?[0-9a-fA-F&rsquo;]+`</p>
<p>Explicit conversion: <code>integer()</code></p>
<p>Operations available that work on a integer:</p><ul>
<li><code>+ integer -&gt; integer</code></li>
<li><code>- integer -&gt; integer</code></li>
<li><code>++ integer -&gt; integer</code></li>
<li><code>-- integer -&gt; integer</code></li>
<li><code>integer + integer -&gt; integer</code></li>
<li><code>integer - integer -&gt; integer</code></li>
<li><code>integer * integer -&gt; integer</code></li>
<li><code>integer / integer -&gt; integer</code></li>
<li><code>integer % integer -&gt; integer</code></li>
<li><code>integer ** integer -&gt; integer</code></li>
<li><code>integer | integer -&gt; integer</code></li>
<li><code>integer &amp; integer -&gt; integer</code></li>
<li><code>integer ^ integer -&gt; integer</code></li>
<li><code>~ integer -&gt; integer</code></li>
<li><code>integer &gt;&gt; integer -&gt; integer</code></li>
<li><code>integer &lt;&lt; integer -&gt; integer</code></li>
<li><code>integer == integer -&gt; boolean</code></li>
<li><code>integer != integer -&gt; boolean</code></li>
<li><code>integer &lt; integer -&gt; boolean</code></li>
<li><code>integer &gt; integer -&gt; boolean</code></li>
<li><code>integer &lt;= integer -&gt; boolean</code></li>
<li><code>integer &gt;= integer -&gt; boolean</code></li>
<li><code>integer += integer -&gt; integer</code></li>
<li><code>integer -= integer -&gt; integer</code></li>
<li><code>integer *= integer -&gt; integer</code></li>
<li><code>integer **= integer -&gt; float</code></li>
<li><code>integer /= integer -&gt; integer</code></li>
<li><code>integer %= integer -&gt; integer</code></li>
<li><code>integer &amp;= integer -&gt; integer</code></li>
<li><code>integer ^= integer -&gt; integer</code></li>
<li><code>integer |= integer -&gt; integer</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md104"></a>
Decimal</h2>
<p>A decimal floating point format in the form <code>mantissa + 10**exponent</code>.</p>
<p>No literal available.</p>
<p>Explicit conversion: <code>decimal()</code></p>
<p>Operations available that work on a decimal float (integer are implicitly converted to decimal):</p><ul>
<li><code>+ decimal -&gt; decimal</code></li>
<li><code>- decimal -&gt; decimal</code></li>
<li><code>decimal + decimal -&gt; decimal</code></li>
<li><code>decimal - decimal -&gt; decimal</code></li>
<li><code>decimal * decimal -&gt; decimal</code></li>
<li><code>decimal / decimal -&gt; decimal</code></li>
<li><code>decimal % decimal -&gt; decimal</code></li>
<li><code>decimal ** decimal -&gt; decimal</code></li>
<li><code>decimal == decimal -&gt; boolean</code></li>
<li><code>decimal != decimal -&gt; boolean</code></li>
<li><code>decimal &lt; decimal -&gt; boolean</code></li>
<li><code>decimal &gt; decimal -&gt; boolean</code></li>
<li><code>decimal &lt;= decimal -&gt; boolean</code></li>
<li><code>decimal &gt;= decimal -&gt; boolean</code></li>
<li><code>decimal += decimal -&gt; decimal</code></li>
<li><code>decimal -= decimal -&gt; decimal</code></li>
<li><code>decimal *= decimal -&gt; decimal</code></li>
<li><code>decimal **= decimal -&gt; float</code></li>
<li><code>decimal /= decimal -&gt; decimal</code></li>
<li><code>decimal %= decimal -&gt; decimal</code></li>
<li><code>round(decimal)</code></li>
<li><code>floor(decimal)</code></li>
<li><code>ceil(decimal)</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md105"></a>
Float</h2>
<p>A binary floating point format in the form <code>mantissa + 2**exponent</code>.</p>
<p>Syntax: <code>[0-9]+.[0-9]*([eE][-]?[0-9]+)?</code> or <code>[0-9]*.[0-9]+([eE][-]?[0-9]+)?</code></p>
<p>Explicit conversion: <code>float()</code></p>
<p>Operations available that work on a binary float (integer and decimals are implicitly converted to float):</p><ul>
<li><code>+ float -&gt; float</code></li>
<li><code>- float -&gt; float</code></li>
<li><code>float + float -&gt; float</code></li>
<li><code>float - float -&gt; float</code></li>
<li><code>float * float -&gt; float</code></li>
<li><code>float / float -&gt; float</code></li>
<li><code>float % float -&gt; float</code></li>
<li><code>float ** float -&gt; float</code></li>
<li><code>float == float -&gt; boolean</code></li>
<li><code>float != float -&gt; boolean</code></li>
<li><code>float &lt; float -&gt; boolean</code></li>
<li><code>float &gt; float -&gt; boolean</code></li>
<li><code>float &lt;= float -&gt; boolean</code></li>
<li><code>float &gt;= float -&gt; boolean</code></li>
<li><code>round(float)</code></li>
<li><code>floor(float)</code></li>
<li><code>ceil(float)</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md106"></a>
String</h2>
<p>Syntax: <code>"([^"]|\\")*"</code></p>
<p>The literal string may include escape sequences:</p><ul>
<li><code>\"</code> A literal double quote</li>
<li><code>\n</code> A literal line feed</li>
<li><code>\r</code> A literal carriage return</li>
<li><code>\t</code> A literal tab</li>
<li><code>\f</code> A literal form feed</li>
</ul>
<p>Explicit conversion can be done using the <code>string()</code> function.</p>
<p>Operations available that work on a string:</p><ul>
<li><code>string + string -&gt; string</code></li>
<li><code>string == string -&gt; boolean</code></li>
<li><code>string != string -&gt; boolean</code></li>
<li><code>string &lt; string -&gt; boolean</code></li>
<li><code>string &gt; string -&gt; boolean</code></li>
<li><code>string &lt;= string -&gt; boolean</code></li>
<li><code>string &gt;= string -&gt; boolean</code></li>
<li><code>string[integer] -&gt; string</code></li>
<li><code>substr(string text, integer start, integer length) -&gt; string</code></li>
<li><code>size(string text) -&gt; integer</code></li>
<li><code>string | name -&gt; string</code> Pass the string through the named-filter. All datums are implicitly converted to a string.</li>
</ul>
<p>Available filters:</p><ul>
<li><code>url</code> For text that needs to be encoded inside a URL.</li>
<li><code>xml</code> For text that needs to be encoded inside a XML or HTML document.</li>
</ul>
<h2><a class="anchor" id="autotoc_md107"></a>
URL</h2>
<p>No literal available.</p>
<p>Explicit conversion: <code>url()</code></p>
<p>Operations available that work on a string:</p><ul>
<li><code>url / url -&gt; url</code></li>
<li><code>url / string -&gt; url</code></li>
<li><code>url == url -&gt; boolean</code></li>
<li><code>url != url -&gt; boolean</code></li>
<li><code>url &lt; url -&gt; boolean</code></li>
<li><code>url &gt; url -&gt; boolean</code></li>
<li><code>url &lt;= url -&gt; boolean</code></li>
<li><code>url &gt;= url -&gt; boolean</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md108"></a>
Vector</h2>
<p>A list of <code><a class="el" href="namespacett.html#aec37e5f48519c8dbb9bda815a02dd9c6">tt::datum</a></code> objects.</p>
<p>Syntax: '[' ( expression ( ',' expression )* ','? )? ']'</p>
<p>No explicit conversion available.</p>
<p>Operations available that work on a vector:</p><ul>
<li><code>vector + vector -&gt; vector</code></li>
<li><code>vector == vector -&gt; boolean</code></li>
<li><code>vector != vector -&gt; boolean</code></li>
<li><code>vector &lt; vector -&gt; boolean</code></li>
<li><code>vector &gt; vector -&gt; boolean</code></li>
<li><code>vector &lt;= vector -&gt; boolean</code></li>
<li><code>vector &gt;= vector -&gt; boolean</code></li>
<li><code>vector += datum -&gt; vector</code></li>
<li><code>vector[integer] -&gt; datum</code></li>
<li><code>size(vector) -&gt; integer</code></li>
<li><code>sort(vector) -&gt; vector</code></li>
<li><code>vector.append(datum)</code></li>
<li><code>vector.pop() -&gt; datum</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md109"></a>
Map</h2>
<p>A unordered map of key / value pairs; both <code><a class="el" href="namespacett.html#aec37e5f48519c8dbb9bda815a02dd9c6">tt::datum</a></code> objects.</p>
<p>Syntax: '{' ( expression ':' expression ( ',' expression ':' expression )* ','? )? '}'</p>
<p>Operations available that work on a map:</p><ul>
<li><code>map + map -&gt; map</code></li>
<li><code>map == map -&gt; boolean</code></li>
<li><code>map != map -&gt; boolean</code></li>
<li><code>map &lt; map -&gt; boolean</code></li>
<li><code>map &gt; map -&gt; boolean</code></li>
<li><code>map &lt;= map -&gt; boolean</code></li>
<li><code>map &gt;= map -&gt; boolean</code></li>
<li><code>map[datum] -&gt; datum</code></li>
<li><code>size(map) -&gt; integer</code></li>
<li><code>contains(map, datum) -&gt; boolean</code></li>
<li><code>keys(map) -&gt; vector</code></li>
<li><code>values(map) -&gt; vector</code></li>
<li><code>items(map) -&gt; vector[key, value]</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md110"></a>
Escape, Statements and placeholders</h1>
<p>Statements and placeholders are used to generate text.</p>
<p>To make it so generated text will not include unexpected white space the following rules apply:</p><ul>
<li>White-spaces in front of a statement are removed up to the last new-line.</li>
<li>The white-spaces and the linefeed after a statement is removed.</li>
<li>An escape can remove a new-line.</li>
<li>Text (including trailing white-spaces) are kept in front of a statement.</li>
</ul>
<h2><a class="anchor" id="autotoc_md111"></a>
Escape sequences</h2>
<p>The backslash is used to escape:</p><ul>
<li>End of line, mostly used for formatting inside loops.</li>
<li>The <code>$</code> dollar character used in placeholders.</li>
<li>The <code>#</code> hash character used in template statements.</li>
<li>The <code>\</code> backslash itself.</li>
</ul>
<p>Example: </p><div class="fragment"><div class="line">This placeholder is suppressed: \${12 + 24}</div>
<div class="line">This backslash is suppressed: \\${12 + 24}</div>
<div class="line">This line\</div>
<div class="line">feed is suppressed.</div>
</div><!-- fragment --><p>Result: </p><div class="fragment"><div class="line">This placeholder is suppressed: ${12 + 24}</div>
<div class="line">This backslash is suppressed: \36</div>
<div class="line">This linefeed is suppressed.</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md112"></a>
Placeholder</h2>
<p>The placeholder is an expression that is evaluated and explicitly converted to a string. This string will then be inserted into the text.</p>
<p>Syntax: '${' expression '}'</p>
<p>Example: </p><div class="fragment"><div class="line">${12 + 24}</div>
</div><!-- fragment --><p>Result: </p><div class="fragment"><div class="line">36</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md113"></a>
Expression Statement</h2>
<p>Expressions can be evaluated as statements themselves. This is mostly useful for doing assignment, modiyfing data or calling functions with side effects.</p>
<p>Expression statement will add text to the output.</p>
<p>At the top-level assignments are done in global scope. Inside functions and blocks assignments are done in the local scope, even if the name already exists in the global scope. Loops do not introduce scopes.</p>
<p>Syntax: '##' expression</p>
<p>Example </p><div class="fragment"><div class="line">## foo = 42</div>
<div class="line">## [foo, bar] = [foo + 2, 2]</div>
<div class="line">${foo} ${bar}</div>
</div><!-- fragment --><p>Result: </p><div class="fragment"><div class="line">44 2</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md114"></a>
Including files</h2>
<p>The <code>#include</code> statement is evaluated during parsing, by parsing the included file at the current position recursively. An <code>#include</code> statement can only appear at the top-level of each file, i.e. it can not be used inside the body of a flow-control statement.</p>
<p>Functions and blocks that are included by the <code>#include</code> statements are available in the global scope. See the data model chapter.</p>
<p>The filename is an expression, this expression is evaluated during parsing. When the filename argument is relative, the file is located relative to the current file.</p>
<p>It is recommended that the included files have the <code>.tti</code> (TTauri Include) extension, and top-level template files have the <code>.ttt</code> (TTauri Template) extension.</p>
<p>Warning: There is no protection against including a file multiple times or recursively.</p>
<p>Syntax: &lsquo;&rsquo;#include' url-expression`</p>
<p>Example: </p><div class="fragment"><div class="line">#include &quot;foo.tti&quot;</div>
</div><!-- fragment --><p>Result: </p><div class="fragment"><div class="line">This is the contents of foo.tti.</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md115"></a>
If statement</h2>
<p>Conditional <code>#if</code> statement, with optional <code>#elif</code> statments and optional end <code>#else</code> statement. The expression in the <code>#elif</code> statements are only evaluated if the result of the previous <code>#if</code> or <code>#elif</code> expressions where <code>false</code>.</p>
<p>Syntax:</p><ul>
<li>&lsquo;&rsquo;#if' boolean-expression '<br  />
'<code> -</code>'#elif' boolean-expression '<br  />
'<code> -</code>'#else' '<br  />
'<code> -</code>'#end' '<br  />
'`</li>
</ul>
<p>Example: </p><div class="fragment"><div class="line">## foo = 5</div>
<div class="line"> </div>
<div class="line">#if foo == 2</div>
<div class="line">Foo is two.</div>
<div class="line">#elif foo == 3</div>
<div class="line">Foo is three.</div>
<div class="line">#elif foo == 4</div>
<div class="line">Foo is four.</div>
<div class="line">#else</div>
<div class="line">Foo is ${foo}.</div>
<div class="line">#end</div>
</div><!-- fragment --><p>Result: </p><div class="fragment"><div class="line">Foo is 5.</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md116"></a>
For loop</h2>
<p>A for loop iterates over the result of an the expression. Each iteration-result is assigned to the name in front of the <code>in</code> keyword, optionally the iteration-result is unpacked into multiple names.</p>
<p>It is possible to loop over strings, vectors and maps. A string will yield a single character string on each iterations. A vector will yield a value on each iteration. A map will yield a vector with a key and value on each iteration, sorted by key.</p>
<p>When unpacking multiple names, the number of names must match the size of the vector that was yielded on each iteration.</p>
<p>The <code>#else</code> part of the for loop is only executed when the result of the expression has zero items.</p>
<p>Inside the loop extra variables are available for convenience:</p><ul>
<li><code>$i</code> or <code>$count</code> integer index of the iteration</li>
<li><code>$size</code> or <code>$length</code> integer index of the iteration</li>
<li><code>$first</code> is true if this is the first iteration</li>
<li><code>$last</code> is true if this is the last iteration</li>
<li>The extra variables created by an outer loop are prefixed with an extra <code>$</code>.</li>
</ul>
<p>Syntax:</p><ul>
<li>&lsquo;&rsquo;<a class="el" href="range__map_8hpp.html#a916310707a78d17d3cf580c4fe7838c2">for</a>' name ( ',' name )* 'in' expression '<br  />
'<code> -</code>'#else' '<br  />
'<code> -</code>'#end' '<br  />
'`</li>
</ul>
<p>Example: </p><div class="fragment"><div class="line">#for x in [1, 2, &quot;hello&quot;]</div>
<div class="line">The value of x is ${x}.</div>
<div class="line">#else</div>
<div class="line">The list was empty.</div>
<div class="line">#end</div>
</div><!-- fragment --><p>Result: </p><div class="fragment"><div class="line">The value of x is 1.</div>
<div class="line">The value of x is 2.</div>
<div class="line">The value of x is hello.</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md117"></a>
While loop</h2>
<p>A while loop executes a block multiple times until the expression yields <code>false</code>.</p>
<p>Inside the loop extra variables are available for convenience:</p><ul>
<li><code>$i</code> or <code>$count</code> integer index of the iteration</li>
<li><code>$first</code> is true if this is the first iteration</li>
<li>The extra variables created by an outer loop are prefixed with an extra <code>$</code>.</li>
</ul>
<p>Syntax:</p><ul>
<li>&lsquo;&rsquo;#while' boolean-expression '<br  />
'<code> -</code>'#end' '<br  />
'`</li>
</ul>
<p>Example: </p><div class="fragment"><div class="line">## i = 0</div>
<div class="line">#while i &lt; 3</div>
<div class="line">Iteration ${i}.</div>
<div class="line">## i = i + 1</div>
<div class="line">#end</div>
</div><!-- fragment --><p>Result: </p><div class="fragment"><div class="line">Iteration 0.</div>
<div class="line">Iteration 1.</div>
<div class="line">Iteration 2.</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md118"></a>
Do-while loop</h2>
<p>A do-while loop executes a block at least once until the expression yields <code>false</code>.</p>
<p>Inside the loop extra variables are available for convenience:</p><ul>
<li><code>$i</code> or <code>$count</code> integer index of the iteration</li>
<li><code>$first</code> is true if this is the first iteration</li>
<li>The extra variables created by an outer loop are prefixed with an extra <code>$</code></li>
</ul>
<p>Syntax:</p><ul>
<li>&lsquo;&rsquo;#do' '<br  />
'<code> -</code>'#while' boolean-expression '<br  />
'`</li>
</ul>
<div class="fragment"><div class="line">## i = 0</div>
<div class="line">#do</div>
<div class="line">Iteration ${i}.</div>
<div class="line">## i = i + 1</div>
<div class="line">#while i &lt; 0</div>
</div><!-- fragment --><p>Result: </p><div class="fragment"><div class="line">Iteration 0.</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md119"></a>
Continue and Break</h2>
<p>Stop executing of a block inside a loop, then:</p><ul>
<li><em>continue</em> with the next iteration of the loop or</li>
<li><em>break</em> out of the loop</li>
</ul>
<p>Syntax:</p><ul>
<li>&lsquo;&rsquo;#continue' '<br  />
'<code> -</code>'#break' '<br  />
'`</li>
</ul>
<p>Example: </p><div class="fragment"><div class="line">#for x in [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]</div>
<div class="line">    #if x == &quot;bar&quot;</div>
<div class="line">        #continue</div>
<div class="line">The value of x is ${x}.</div>
<div class="line">#end</div>
<div class="line"> </div>
<div class="line">#for y in [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]</div>
<div class="line">    #if y == &quot;bar&quot;</div>
<div class="line">        #break</div>
<div class="line">The value of y is ${y}.</div>
<div class="line">#end</div>
</div><!-- fragment --><p>Result: </p><div class="fragment"><div class="line">The value of x is foo.</div>
<div class="line">The value of x is baz.</div>
<div class="line">The value of y is foo.</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md120"></a>
Function</h2>
<p>Define a function that can be called in expressions. A function with a return statement will simply return with its value. A function without a return statement will return its textual-output.</p>
<p>It is not possible for a function to return both textual-output and a value.</p>
<p>Functions with the same name will replace the previously defined function. The previously defined function is available as <code>super()</code> inside the function. This functionality together with the <code>#include</code> statement can be used for as a simple form of object-oriented-polymorphism.</p>
<p>Syntax:</p><ul>
<li>&lsquo;&rsquo;#function' name '(' ( name ( ',' name )* ','? )? ')' '<br  />
'<code> -</code>'#end' '<br  />
'`</li>
</ul>
<p>Example: </p><div class="fragment"><div class="line">#function foo(x)</div>
<div class="line">foo is ${x}.</div>
<div class="line">#end</div>
<div class="line"> </div>
<div class="line">#function foo(x)</div>
<div class="line">bar is ${super(x)}.</div>
<div class="line">#end</div>
<div class="line"> </div>
<div class="line">${foo(42)}</div>
</div><!-- fragment --><p>Result: </p><div class="fragment"><div class="line">bar is foo is 42.</div>
<div class="line">.</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md121"></a>
Return</h2>
<p>Return data from a function</p>
<p>Syntax: &lsquo;&rsquo;#return' expression '<br  />
'`</p>
<p>Example: </p><div class="fragment"><div class="line">#function foo()</div>
<div class="line">    #return 42</div>
<div class="line">#end</div>
<div class="line"> </div>
<div class="line">${foo + 3}</div>
</div><!-- fragment --><p>Result: </p><div class="fragment"><div class="line">45</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md122"></a>
Named block</h2>
<p>A block is like a function without arguments which is automatically evaluated where it was first defined. A block can only return textual-output.</p>
<p>Like a function a block can be overridden by another block definition with the same name. The previously defined block is available as <code>super()</code>. This functionality together with the <code>#include</code> statement can be used for as a simple form of object-oriented-polymorphism.</p>
<p>Syntax:</p><ul>
<li>&lsquo;&rsquo;#block' name '<br  />
'<code> -</code>'#end'`</li>
</ul>
<p>Example: </p><div class="fragment"><div class="line">1</div>
<div class="line">#block foo</div>
<div class="line">foo</div>
<div class="line">#end</div>
<div class="line">2</div>
<div class="line">#block foo</div>
<div class="line">bar</div>
<div class="line">#end</div>
<div class="line">3</div>
</div><!-- fragment --><p>Result: </p><div class="fragment"><div class="line">1</div>
<div class="line">bar</div>
<div class="line">2</div>
<div class="line">3</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.0-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" width="104" height="31" alt="doxygen"/></a> 1.8.17
</small></address>
</body>
</html>
