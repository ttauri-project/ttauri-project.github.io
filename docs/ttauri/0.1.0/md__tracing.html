<!-- HTML header for doxygen 1.9.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TTauri: Tracing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="version_dropdown.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TTauri
   </div>
   <div id="projectbrief">A low latency retained GUI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Tracing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Tracing, logging and exception throwing.</p>
<h1><a class="anchor" id="autotoc_md134"></a>
Span</h1>
<p>Each thread has a trace stack.</p>
<p>Use <code>trace::scoped_span</code> object to start a span which will automatically end when the scope ends. This span will be added to the top of the stack.</p>
<p>Use <code>trace::span_start()</code> and <code>trace::span_stop()</code> to have more control of span creation.</p>
<p>A span will have a tag that needs to be checked that it is not used in multiple locations in the source code. We can possibly use the <code>__FILENAME__</code> <code>__LINE__</code> to create a compile time tag that is used to create a struct-tag to use in a template variable. Both a user defined string-tag are logged together with the typeid() of the struct-tag to use external tools to check if the string-tag was not accidently reused.</p>
<p>The time spend in a span is recorded in a ring buffer and the running average for each power of two is kept track off. Also the minimum and maxmium is kept up to date. This will allow the logging and monitoring of these statistics.</p>
<h1><a class="anchor" id="autotoc_md135"></a>
Logging</h1>
<p>Any logging with the following macros will be done in the context of the trace-span that is at the top of the stack:</p><ul>
<li><code>LOG_DEBUG</code></li>
<li><code>LOG_INFO</code></li>
<li><code>LOG_WARNING</code></li>
<li><code>LOG_EXCEPTION</code></li>
<li><code>LOG_ERROR</code></li>
<li><code>LOG_FATAL</code></li>
</ul>
<p>A span is marked with the highest log level that was used by logging, or by any child-span's logging.</p>
<p>This way the span stack can be completely logged to a file for debugging purpose.</p>
<h1><a class="anchor" id="autotoc_md136"></a>
Exceptions</h1>
<p>Exceptions should be thrown using the <code>TRACED_THROW</code> macro. This will cause <code>LOG_EXCEPTION</code> to be used to log the exception, and potentially the complete stack of spans to be dumped.</p>
<h1><a class="anchor" id="autotoc_md137"></a>
Counter</h1>
<p>Counters are used to count events. Use the <code>trace::count&lt;&gt;()</code> function to count events. All counters start at zero, and are automatically registered for logging at certain intervals. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.0-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" width="104" height="31" alt="doxygen"/></a> 1.8.17
</small></address>
</body>
</html>
