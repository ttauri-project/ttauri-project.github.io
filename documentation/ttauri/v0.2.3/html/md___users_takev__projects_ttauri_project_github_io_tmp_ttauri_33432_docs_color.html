<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TTauri: Color</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TTauri
   &#160;<span id="projectnumber">v0.2.3</span>
   </div>
   <div id="projectbrief">A low latency retained GUI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Color </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md95"></a>
Extended Linear sRGB</h1>
<p>Absolute color values uses the extended-linear-sRGB color space internally in the application, the ttauri library and its shaders. This allows for HDR (high dynamic range) and high gamut colors while remaining backward compatible with normal sRGB and rec709 colors.</p>
<p>The extended linear sRGB uses the ITU-R BT.709 color primaries and white-point, but uses a linear transfer function, where the value (0.0, 0.0, 0.0) is 0 nits black and (1.0, 1.0, 1.0) is 80 nits white.</p>
<p>Values above 1.0 for high dynamic range, and values below 0.0 for high gamut are allowed.</p>
<h2><a class="anchor" id="autotoc_md96"></a>
Alpha</h2>
<p>Alpha is encoded as a linear floating point number between 0.0 (transparent) and 1.0 (opaque).</p>
<p>Inside the application and ttauri-library the color values are NOT pre-multiplied with the alpha value. However the shaders may pre-multiply alpha internally for optimization or color accuracy reasons.</p>
<h1><a class="anchor" id="autotoc_md97"></a>
Coverage blending</h1>
<p>When compositing glyphs onto background we use a mask with coverage value, of how much the glyph has covered that specific pixel.</p>
<p>If you convert this coverage value 0% - 100% directly into an alpha value of 0.0 and 1.0 you will find that linear compositing of the text color on the background will use different result when compositing dark on light vs light on dark. Where the weight of the glyph seems to change.</p>
<p>In fact linear compositing is actually incorrect and compositing should be done by keeping in mind the perceptional non-linear lightness curve and the actual color values of the foreground and background.</p>
<p>The perceptional curve is cubic, as an optimization a square perceptional curve seem to be visually good enough to handle fonts.</p>
<p>The following function is used for subpixel-compositing, with a coverage value <code>a</code> for each subpixel.</p>
<div class="fragment"><div class="line">vec3 mix_perceptual(vec3 x, vec3 y, vec3 a)</div>
<div class="line">{</div>
<div class="line">    vec3 r = mix(sqrt(x), sqrt(y), a);</div>
<div class="line">    return r * r;</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md98"></a>
Color format type</h1>
<p>Color format types are used in vertex arrays when communicating with the GPU.</p>
<p>The types have the following syntax: <code>numeric-type</code> _ <code>color-components</code> [ _pack ]</p>
<h2><a class="anchor" id="autotoc_md99"></a>
Numeric type</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Type   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">norm   </td><td class="markdownTableBodyLeft">Signed integer mapped to the floating point range between -1.0 and 1.0.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">unorm   </td><td class="markdownTableBodyLeft">Unsigned integer mapped to the floating point range between 0.0 and 1.0.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">int   </td><td class="markdownTableBodyLeft">Signed integer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">uint   </td><td class="markdownTableBodyLeft">Unsigned integer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">float   </td><td class="markdownTableBodyLeft">Floating point number.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">srgb   </td><td class="markdownTableBodyLeft">Non-linear sRGB format for the RGB component, the alpha remains linear. Values are mapped to a floating point range between 0.0 and 1.0.   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md100"></a>
Color components</h2>
<p>The color components are the lower case letters: r, g, b &amp; a. The ordering of the letters describe the order of the color components in memory. A number describes the number of bits of each component before it.</p>
<p>Here are a few examples of components:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Combination   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">rgba32   </td><td class="markdownTableBodyLeft">32 bits per component red, green, blue &amp; alpha    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">rgba16   </td><td class="markdownTableBodyLeft">16 bits per component red, green, blue &amp; alpha    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">rgba8   </td><td class="markdownTableBodyLeft">8 bits per component red, green, blue &amp; alpha    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">rgb8   </td><td class="markdownTableBodyLeft">8 bits per component red, green, blue    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">rg8   </td><td class="markdownTableBodyLeft">8 bits per component red, green    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">r8   </td><td class="markdownTableBodyLeft">8 bits per component red    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">abgr8   </td><td class="markdownTableBodyLeft">8 bits per component alpha, blue, green &amp; red    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">a2bgr10   </td><td class="markdownTableBodyLeft">2 bit alpha, 10 bits per component blue, green &amp; red   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md101"></a>
Packing</h2>
<p>If the format is non-packed, then each each color component must be 8, 16, 32 or 64 bits in size. Each color component is stored in memory in native-byte-order, and the components are ordered with in increasing memory addresses.</p>
<p>If the format is packed, then the color components are packed together in a single integer. The color components are packed inside the integer from msb to lsb. he integer is 8, 16, 32, 64 or 128 bits in size. The integer is stored in memory in native-byte-order. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
